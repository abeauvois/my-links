# Select Command - Interactive Link Selection

The `select` command provides a beautiful, interactive interface for selecting and filtering links from your CSV files using [clack prompts](https://github.com/bombshell-dev/clack).

## Features

âœ¨ **Beautiful CLI Interface** - Powered by clack for a modern, user-friendly experience
ğŸ“‹ **Multiple Selection Modes** - Choose from individual links, by tag/category, or all links
ğŸ¯ **Grouped Display** - Links are organized by tags for easy navigation
ğŸ”„ **Flexible Actions** - Export to CSV, display in terminal, or copy URLs
âŒ¨ï¸ **Intuitive Controls** - Space to select, Enter to confirm, Ctrl+C to cancel

## Usage

### Basic Usage

```bash
# Interactive mode - will prompt for CSV path
bun run cli:select

# Direct mode - specify CSV file
bun run cli:select output.csv

# Or use the full command
bun run src/cli/index.ts select output.csv
```

## Selection Modes

### 1. Select Individual Links

Browse and select specific links organized by category/tag. Uses clack's `groupMultiselect` for a hierarchical view.

```
â”Œ  Select links (Space to select, Enter to confirm)
â”‚
â—†  ai-models
â”‚  â—» Anthropic just broke the rules - Full AI Academy... (anthropic.com)
â”‚  â—» Context engineering guide from Paul Iusztin (medium.com)
â”‚
â—†  machine-learning
â”‚  â—» SVM boundary visualization tutorial (twitter.com)
â”‚  â—» Foundations of Machine Learning course (linkedin.com)
â””
```

### 2. Select by Tag/Category

Choose entire categories at once using `multiselect`:

```
â”Œ  Select tags/categories to include
â”‚  â—¼ ai-models (3 links)
â”‚  â—» machine-learning (5 links)
â”‚  â—¼ engineering (8 links)
â”‚  â—» tools (4 links)
â””
```

### 3. Select All Links

Quickly select all links in the CSV file for bulk operations.

## Actions

After selecting links, choose what to do with them:

### Export to CSV

Save selected links to a new CSV file:

```bash
Output CSV filename: selected-links.csv
âœ” Exported 5 links to selected-links.csv
```

### Display in Terminal

View selected links with formatted output:

```
ğŸ“‹ Selected Links:

1. [ai-models] Anthropic AI Academy - Free AI learning resource
   ğŸ”— https://anthropic.com/academy

2. [machine-learning] SVM Boundary Visualization Tutorial
   ğŸ”— https://twitter.com/johndoe/status/123456789
```

### Copy URLs to Clipboard

Get a list of URLs ready to copy manually (or use clipboard library for auto-copy).

## Interactive Flow Example

```bash
$ bun run cli:select output.csv

â”Œ  ğŸ¯ Link Selection
â”‚
â—  Reading links from output.csv...
â”‚
â—†  Found 15 links
â”‚
â—†  How would you like to select links?
â”‚  â— Select individual links
â”‚  â—‹ Select by tag/category
â”‚  â—‹ Select all links
â”‚
â—†  Select links (Space to select, Enter to confirm)
â”‚  [Press space to select, enter to continue]
â”‚
â—†  Selected 7 links
â”‚
â—†  What would you like to do with selected links?
â”‚  â— Export to new CSV file
â”‚  â—‹ Display in terminal
â”‚  â—‹ Copy URLs to clipboard
â”‚
â—†  Output CSV filename: my-selected-links.csv
â”‚
â—‡  Exporting selected links...
â”‚
â—†  Exported 7 links to my-selected-links.csv
â”‚
â””  âœ¨ Selection complete!
```

## CSV Format

The select command works with CSV files generated by the main extract command. Expected columns:

- `url` - The link URL (required)
- `tag` - Category/tag (optional, defaults to "untagged")
- `description` - Link description (optional)
- `sourceFile` - Original email file (optional)
- `createdAt` - Creation timestamp (optional)
- `updatedAt` - Last update timestamp (optional)

Example CSV:

```csv
link,tag,description
https://anthropic.com,ai-models,Anthropic AI Academy
https://github.com/clack,tools,Beautiful CLI prompts
https://twitter.com/x/123,social,ML Tutorial Thread
```

## Keyboard Controls

- **Space** - Toggle selection (in multiselect modes)
- **Enter** - Confirm selection
- **â†‘/â†“ Arrow Keys** - Navigate options
- **Ctrl+C** - Cancel operation (handled gracefully)

## Error Handling

The command includes comprehensive error handling:

- âœ… Invalid CSV paths prompt for correction
- âœ… Empty CSV files are handled gracefully
- âœ… Cancellation (Ctrl+C) is caught and presented cleanly
- âœ… URL parsing errors are caught per-link

## Integration with Existing Workflow

```bash
# 1. Extract links from emails
bun run cli mylinks.zip output.csv

# 2. Interactively select and filter links
bun run cli:select output.csv

# 3. Work with the filtered results
bun run cli:select selected-links.csv
```

## Future Enhancements

Potential improvements for the select command:

- [ ] Add clipboard auto-copy support (using clipboardy)
- [ ] Support for link editing/updating tags
- [ ] Bulk tag assignment to selected links
- [ ] Search/filter functionality
- [ ] Export to other formats (JSON, Markdown, etc.)
- [ ] Integration with Notion export
- [ ] Animated task selection (as mentioned in requirements)

## Technical Details

### Dependencies

- `@clack/prompts` - Beautiful CLI prompts
- `csv-parse` - CSV parsing
- Built with TypeScript and Bun

### Architecture

- Command location: `src/cli/commands/select.ts`
- Follows clean architecture principles
- Reuses existing domain entities (`EmailLink`)
- Reuses infrastructure adapters (`CsvFileWriter`)

### Code Structure

```
src/cli/
  â”œâ”€â”€ index.ts            # Main CLI entry point
  â””â”€â”€ commands/
      â””â”€â”€ select.ts       # Select command implementation
```

## Examples

### Example 1: Filter AI/ML Links

```bash
bun run cli:select output.csv
# Select "by tag" â†’ Choose "ai-models" and "machine-learning" â†’ Export
```

### Example 2: Quick Preview

```bash
bun run cli:select output.csv
# Select "all" â†’ Display in terminal
```

### Example 3: Create Curated List

```bash
bun run cli:select output.csv
# Select "individual links" â†’ Pick your favorites â†’ Export to curated.csv
```

## Tips

ğŸ’¡ **Large CSV files**: Use tag-based selection for better performance
ğŸ’¡ **Keyboard shortcuts**: Arrow keys + Space is faster than mouse
ğŸ’¡ **Cancellation**: Ctrl+C is always safe and properly handled
ğŸ’¡ **CSV column names**: The command handles both 'link' and 'url' column names

---

**Enjoy your beautiful CLI experience! ğŸª„**
